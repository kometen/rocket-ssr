async function handleSigninClick(e){e.preventDefault();var alias=document.getElementById("alias").value,p=(Status("Starting sign in..."),new Passwordless.Client({apiUrl:API_URL,apiKey:API_KEY}));try{var user,{token,error}=await p.signinWithAlias(alias);error?(Status(JSON.stringify(error,null,2)),Status("Sign in failed, received the following error")):(console.log("Received token",token),user=await(await fetch("/passwordless/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:token})})).json(),Status("User details: "+JSON.stringify(user,null,2)),Status("Yey! Succesfully signed in without a password!"),console.log("User",user))}catch(e){console.error("Things went really bad: ",e),Status("Things went bad, check console")}}document.getElementById("passwordless-signin").addEventListener("click",handleSigninClick);
